@page "/"
@using Frontend.Models
@using Frontend.Services

<PageTitle>Search</PageTitle>

<MudGrid>
    <MudItem xs="12">
        <MudTextField 
            @bind-Value="SearchImages"
            Label="Ricerca una immagine"
            HelperText="Ricerca una immagine per nome o descrizione"
            Variant="Variant.Outlined"/>
    </MudItem>
</MudGrid>

@if(Photos?.Length > 0)
{
    <MudGrid Spacing="2" Justify="Justify.Center" Class="md">
        @foreach(var p in Photos)
        {
            <MudItem xs=12 md=6 lg=4>
                <ImageViewerComponent Photo=p></ImageViewerComponent>
            </MudItem>   
        }
    </MudGrid>   
}


@code{
    public Photo[]? Photos { get; set; }

    [Inject]
    public IMinimalService? MinimalService { get; set; }
    protected string? SearchImages = null;

    protected override async Task OnInitializedAsync()
    {
        Photos = await MinimalService?.SearchImagesAsync()!;
    }
}